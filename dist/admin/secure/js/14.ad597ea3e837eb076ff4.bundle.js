(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{282:function(e,t){e.exports=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}},285:function(e,t,r){var n=r(282);e.exports=function(e,t){if(null==e)return{};var r,s,a=n(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}},452:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(13),s=r(10),a=r(1),i=r(0),l=r(6),o=r(15),c=r(96),u=r(16);r(305);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const d=Object(i.forwardRef)(({data:e,loading:t,value:r,refList:n,canRead:b,isMulti:d,search:p,autoFocus:j,serverErrors:g,onChange:O,htmlID:m,setSearch:y,selectProps:h,fetchMore:v,isDisabled:x},D)=>{const w=e&&e[n.gqlNames.listQueryName]?e[n.gqlNames.listQueryName].map(e=>({value:e,label:e._label_})):[],N=g&&g.find(e=>e instanceof Error&&"AccessDeniedError"===e.name);let P=null;const $=e=>"string"==typeof e?w.find(t=>t.value.id===e)||{label:e,value:e}:{label:e._label_,value:e};null!==r&&b&&(d?P=(Array.isArray(r)?r:[]).map($):r&&(P=$(r)));const k=e&&e[n.gqlNames.listQueryMetaName]?e[n.gqlNames.listQueryMetaName].count:0,q=Object(i.useMemo)(()=>({MenuList:e=>{let{children:t}=e,r=Object(s.a)(e,["children"]);const l=Object(i.useRef)(null),c=o.gql`
            query RelationshipSelectMore($search: String!, $first: Int!, $skip: Int!) {
              ${n.gqlNames.listQueryName}(search: $search, first: $first, skip: $skip) {
                _label_
                id
              }
            }
          `;return function(e,t){Object(i.useEffect)(()=>{let r=new IntersectionObserver(e,{}),n=t.current;if(null!==n)return r.observe(n),()=>r.unobserve(n)})}(([{isIntersecting:e}])=>{!r.isLoading&&e&&r.options.length<k&&v({query:c,variables:{search:p,first:50,skip:r.options.length},updateQuery:(e,{fetchMoreResult:t})=>t?f(f({},e),{},{[n.gqlNames.listQueryName]:[...e[n.gqlNames.listQueryName],...t[n.gqlNames.listQueryName]]}):e})},l),Object(a.jsx)(u.z.MenuList,r,t,Object(a.jsx)("div",{css:{textAlign:"center"},ref:l},r.options.length<k&&Object(a.jsx)("span",{css:{padding:8}},"Loading...")))}}),[k,n.gqlNames.listQueryName]);return Object(a.jsx)(c.a,Object(l.a)({onInputChange:e=>y(e),isLoading:t,autoFocus:j,isMulti:d,components:q,getOptionValue:e=>e.value.id,value:P,placeholder:b?void 0:N&&N.message,options:w,onChange:O,id:"react-select-"+m,isClearable:!0,instanceId:m,inputId:m,innerRef:D,menuPortalTarget:document.body,isDisabled:x},h))}),p=({innerRef:e,autoFocus:t,field:r,errors:n,renderContext:s,htmlID:l,onChange:c,isMulti:u,value:b,isDisabled:f})=>{const[p,j]=Object(i.useState)(""),g=r.getRefList(),O=o.gql`
    query RelationshipSelect($search: String!, $first: Int!, $skip: Int!) {
      ${g.gqlNames.listQueryName}(search: $search, first: $first, skip: $skip) {
        _label_
        id
      }

      ${g.gqlNames.listQueryMetaName}(search: $search) {
        count
      }
    }
  `,m=!n||n.every(e=>!(e instanceof Error&&"AccessDeniedError"===e.name)),y="dialog"===s?{menuShouldBlockScroll:!0}:null,{data:h,error:v,loading:x,fetchMore:D}=Object(o.useQuery)(O,{fetchPolicy:"network-only",variables:{search:p,first:10,skip:0}});return v?(console.log("ERROR!!!",v),"Error"):Object(a.jsx)(d,{data:h,loading:x,value:b,refList:g,canRead:m,isMulti:u,search:p,autoFocus:t,serverErrors:n,onChange:c,htmlID:l,setSearch:j,selectProps:y,fetchMore:D,ref:e,isDisabled:f})}},651:function(e,t,r){"use strict";r.r(t);var n=r(13),s=(r(285),r(1)),a=r(74),i=r(0),l=(r(199),r(9)),o=r(8),c=r(2),u=r(15),b=r(59),f=(r(96),r(305),r(452)),d=r(182);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g({listKey:e,value:t,onAddUser:r,many:n,isDisabled:a}){const i="authenticated"+e,{data:f}=Object(u.useQuery)(u.gql`
    query User {
      ${i} {
        _label_
        id
      }
    }
  `);if(f&&f[i]){const e=f[i].id;if(null!==t&&(n?t.some(t=>t.id===e):t.id===e))return null;const u=`${n?"Add":"Set as"} ${f[i]._label_}`;return Object(s.jsx)(b.a,{placement:"top",content:u},e=>Object(s.jsx)(o.b,{css:{marginLeft:c.d},variant:"ghost",ref:e,onClick:()=>{r(f[i])},icon:l.o,"aria-label":u,isDisabled:a}))}return null}function O({field:e,value:t}){const{many:r}=e.config,{fullPath:n}=e.getRefList();let a,i=!1,u=n;return r?(a="View List of Related Items",t.length||(i=!0),u=`${u}?!id_in="${t.slice(0,100).map(({id:e})=>e).join(",")}"`):(a="View Item Details",t?u=`${u}/${t.id}`:i=!0),Object(s.jsx)(b.a,{placement:"top",content:a},e=>Object(s.jsx)(o.b,{ref:e,icon:l.l,"aria-label":a,variant:"ghost",css:{marginLeft:c.d},target:"_blank",to:u,isDisabled:i}))}function m({field:e,item:t,onCreate:r,isDisabled:n}){const{list:a,openCreateItemModal:u}=Object(d.e)();let f,p=e.getRefList(),g="Create and add "+p.singular;return t&&t.id&&(f=p.fields.filter(t=>"Relationship"===t.type&&t.config.ref===a.key&&t.config.refFieldPath===e.path).reduce((e,r)=>{const n={_label_:t._label_||"<link to parent>",id:t.id};return j(j({},e),{},{[r.path]:r.config.many?[n]:n})},{})),Object(s.jsx)(i.Fragment,null,Object(s.jsx)(b.a,{placement:"top",content:g},e=>Object(s.jsx)(o.b,{ref:e,onClick:u,icon:l.p,"aria-label":g,variant:"ghost",css:{marginLeft:c.d},isDisabled:n})),Object(s.jsx)(d.a,{prefillData:f,onCreate:({data:e})=>{r(e[p.gqlNames.createMutationName])}}))}t.default=({autoFocus:e,field:t,value:r=[],renderContext:n,errors:i,onChange:l,item:o,list:c,isDisabled:u})=>{const{many:b,ref:p}=t.config,{authStrategy:j}=Object(d.d)(),y="ks-input-"+t.path,h=t.getRefList();return Object(s.jsx)(a.a,null,Object(s.jsx)(a.d,{htmlFor:y,field:t,errors:i}),Object(s.jsx)(a.b,{text:t.adminDoc}),Object(s.jsx)(a.c,null,Object(s.jsx)("div",{css:{flex:1}},Object(s.jsx)(f.a,{autoFocus:e,isMulti:b,field:t,value:r,errors:i,renderContext:n,htmlID:y,onChange:e=>{const{many:r}=t.config;l(r?e?e.map(e=>e.value):[]:e?e.value:null)},isDisabled:u})),Object(s.jsx)(d.b,{list:h},Object(s.jsx)(m,{onCreate:e=>{l(b?r.concat(e):e)},field:t,item:o,list:c,isDisabled:u})),j&&p===j.listKey&&Object(s.jsx)(g,{many:b,onAddUser:e=>{l(b?r.concat(e):e)},value:r,listKey:j.listKey,isDisabled:u}),Object(s.jsx)(O,{field:t,value:r})))}}}]);